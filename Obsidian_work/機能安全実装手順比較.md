#ChatGPT #制御 #通信

```
依頼：
各産業用Ethernetの機能安全実装手順を教えてください。
```

以下では EtherCAT / FSoE、PROFINET IRT / PROFIsafe、EtherNet/IP / CIP Safety、Ethernet POWERLINK / openSAFETY、CC‑Link IE TSN Safety ――主要 5 方式それぞれの「機能安全を実際に立ち上げる手順」を、工程（①計画 → ⑥検証／認証）に沿ってまとめます。  
※共通部分は先に概観し、その後で方式ごとの具体的設定手順を示します。

---

## 0. 共通フレームワーク（IEC 61508/ISO 13849 ライフサイクル）

| 工程      | 目的                    | 主なアウトプット    |
| ------- | --------------------- | ----------- |
| ① リスク評価 | 危険源特定とSIL/PL決定        | SRS（安全要求仕様） |
| ② 設計    | 安全通信プロトコル＋機器選定        | ネットワーク設計書   |
| ③ 実装    | 安全PLC／I/Oに安全アプリ実装     | ソフト／ハード実装   |
| ④ 検証    | CRC・ウォッチドッグ監視、フェールセーフ | FAT/SATレポート |
| ⑤ 認証    | 第三者機関（TÜV 等）試験        | 認証レポート      |
| ⑥ 維持    | 変更管理・定期プルーフテスト        | 点検記録        |

---

## 1. EtherCAT + FSoE（Safety over EtherCAT）

|手順|ポイント|
|---|---|
|**a. 機器準備**|FSoE‑対応Safety PLC（Safety Master）とFSoE‑Slave（ESC＋FSoEスタック搭載）を用意。|
|**b. FSoEアドレス設定**|ETG.5100で定義された**Safety ID**を各ノードに割当。TwinCAT Safety Editorで設定。|
|**c. 安全アプリ**|“Safety Application List（SAL）”をラダー／STで作成し、分散クロックでタイムベース同期。|
|**d. 診断**|CRC ×2、ウォッチドッグ、パケットシーケンスを自動監視。TwinSAFE LoaderでFSoE通信モニタ。|
|**e. コンフォーマンステスト**|ETG公式コンフォーマンステスト＋TÜV機能安全試験に合格して認証取得。 ([ethercat.org](https://www.ethercat.org/download/documents/Safety-over-EtherCAT_Introduction.pdf?utm_source=chatgpt.com "[PDF] Safety over EtherCAT (FSoE) Introduction"), [ethercat.org](https://www.ethercat.org/download/documents/safety_over_ethercat_overview.pdf?utm_source=chatgpt.com "[PDF] Safety over EtherCAT (FSoE) Introduction and Overview"), [ethercat.org](https://www.ethercat.org/en/safety.html?utm_source=chatgpt.com "Safety over EtherCAT (FSoE)"))|

---

## 2. PROFINET IRT + PROFIsafe

|手順|ポイント|
|---|---|
|**a. 機器準備**|F‑CPU（S7‑1500 F、F‑PLC）とF‑I/O、IRT対応スイッチを用意。|
|**b. F‑アドレス割当**|**F_Source_Add / F_Dest_Add** をTIA Portalの「Assign PROFIsafe address」で設定。複数モジュールは重複禁止。 ([docs.tia.siemens.cloud](https://docs.tia.siemens.cloud/r/en-us/v20/simatic-safety-configuring-and-programming/configuring/assigning-a-profisafe-address-of-the-f-i/os-with-simatic-safety/assign-profisafe-address?utm_source=chatgpt.com "Assign PROFIsafe address - Safety"), [support.industry.siemens.com](https://support.industry.siemens.com/cs/attachments/109748466/109748466_F_Taufe_en.pdf?utm_source=chatgpt.com "[PDF] Assignment of PROFIsafe Addresses via User Program - Support"))|
|**c. 安全プログラム**|F‑ブロック（例: F_SafeOff, F_EmergencyStop）で安全ロジックを構築。|
|**d. 起動テスト**|IRTの時分割領域が正しく予約されているか“PROFINET IRT System Test”でチェック。|
|**e. 機器認証**|機器メーカー側はPI‑Test Lab経由でPROFIsafe認証、エンドユーザはSIL/PL検証をTÜV等で実施。|

---

## 3. EtherNet/IP + CIP Safety

|手順|ポイント|
|---|---|
|**a. 機器準備**|GuardLogix® （Safety Task搭載）＋CIP Safety I/O。PTP対応スイッチ推奨。|
|**b. ネットワーク識別**|**Safety Network Number（SNN）** を Studio 5000 で一意に設定。IP重複時は再割当。 ([Rockwell Automation](https://literature.rockwellautomation.com/idc/groups/literature/documents/rm/1756-rm093_-en-p.pdf?utm_source=chatgpt.com "[PDF] GuardLogix Controller Systems Safety Reference Manual, (1756 ..."), [Asset Cloud](https://assetcloud.roccommerce.net/files/_smcelectric/6/6/2/allen_bradley_5069_l320erms2_manual.pdf?utm_source=chatgpt.com "[PDF] Safety Reference Manual - GuardLogix 5580 and Compact ..."))|
|**c. Safety Signature**|Safetyタスクを **Safety Signature＋Safety Lock** で凍結し、改変検知を有効化。|
|**d. ダウンロード／試運転**|“Safety Task Signature OK” を確認して I/O をRUN。|
|**e. 設計変更時**|Signature解除→編集→再署名というワークフローでトレーサビリティを維持。|

---

## 4. Ethernet POWERLINK + openSAFETY

|手順|ポイント|
|---|---|
|**a. スタック導入**|オープンソース／商用 openSAFETY Stack をMN（Managing Node）およびCN(Controlled Node)に組込む。|
|**b. 安全ノードID**|**SN‑ID** を各CNに設定し、SafeDESIGNER（B&R Automation Studio）で安全プロジェクト作成。|
|**c. 安全オブジェクト**|SPDO/SSDOマッピングで安全信号を定義、CRC16＋タイムスタンプでデータ保護。|
|**d. シミュレーション／デバッグ**|SafeDESIGNER Sim を用いて安全ロジックをオフライン検証。|
|**e. 認証**|openSAFETY自体はSIL3/TÜV認証済み。装置はTÜV Süd or Rheinlandで評価。 ([PCNE](https://www.pcne.eu/article/open-safety-standard/?utm_source=chatgpt.com "Open safety standard - PCN Europe"))|

---

## 5. CC‑Link IE TSN Safety

|手順|ポイント|
|---|---|
|**a. 機器準備**|iQ‑R Safety CPU／FX5‑CCLGN‑MS等のTSN Safety対応モジュール＋Safety Remote I/O。|
|**b. GX Works3設定**|「Module Configuration」で安全マスター／ローカルを配置し、**安全パラメータ（Safety ID、CRC）** を入力。 ([三菱電機](https://www.mitsubishielectric.com/dl/fa/document/catalog/plcf/l08729/l08729b.pdf?utm_source=chatgpt.com "[PDF] Quick Start Guide CC-Link IE TSN Master/Local Module"), [ファサポートミー](https://www.fasupportme.com/portal/en/kb/articles/cc-link-ie-tsn-safety-communication-with-mr-j5g-rj-22-5-2024?utm_source=chatgpt.com "CC-Link IE TSN safety communication with MR-J5G-RJ"))|
|**c. 安全ロジック**|ファンクションブロックをSafety CPUで構築し、ビルド後 Safety Parameter List を出力。|
|**d. ネットワーク診断**|CC‑Link IE Field Diagnostic機能でTSN時分割・冗長通信を監視。|
|**e. 認証**|CLPAの機能安全試験＋TÜV SüdのSIL3評価に合格後、CLPAロゴ使用が可能。|

---

### まとめ & 次のステップ

1. **SIL/PLを満たす安全プロトコルを選んだら、まずは「アドレス／ID設定」と「安全プログラム署名・ロック」の手順を理解する**ことが立ち上げの鍵。
    
2. **診断・監視ツール**（TwinCAT Safety Diag、TIA Portal Online&Diagnostics、Studio 5000 Safety Monitor 等）を活用すると試運転が効率化。
    
3. **第三者認証の要否**は装置の市場・法規で変わるため、早い段階でTÜV等と打ち合わせると手戻りを防げます。
    

さらに「冗長化方式」や「安全ドライブ統合（例：Safe Motion Function）」など個別テーマを深掘りしたい場合は、遠慮なくご相談ください。